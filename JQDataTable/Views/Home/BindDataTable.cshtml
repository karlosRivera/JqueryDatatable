@model List<JQDataTable.Controllers.UserData>

@{
    Layout = null;
    

    ViewBag.Title = "BindDataTable";
}
<html>
    <head>
        <meta name="viewport" content="width=device-width" />
        <title>Index</title>
        <link href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css" rel="stylesheet" />
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
    </head>

<body>
    <div>
        <div class="row">
            <div>
                <table class="table table-striped table-bordered table-hover"
                       id="TableId"
                       cellspacing="0"
                       align="center"
                       width="30%" border="1"></table>
            </div>
        </div>
        <hr />
    </div>
    <script>
        
        var keys = Object.keys(@Html.Raw(Json.Encode(Model[0])));
        var columns = keys.map(function (key) {
            //alert(key);
            return { title: key };
        });

        var data = @Html.Raw(Json.Encode(Model));
        var dataSet = data.map(function (d) {
            return Object.values(d);
        });

        console.log(columns);
        console.log(dataSet);

        $('#TableId').dataTable({
            "columns": columns,
            "data": dataSet
        });
    </script>

</body>
</html>

